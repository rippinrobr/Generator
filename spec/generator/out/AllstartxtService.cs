//------------------------------------------------------------------------------
// Generated on 2011-02-08 18:03:48 -0500
// Generated by rob
// Using Generator 0.1.1
//------------------------------------------------------------------------------
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using AllstarTxt;

using System;



namespace AllstarTxt
{

   public interface IAllstartxtService
   {
   	string ErrorMessage {get;set;}
	IQueryable<AllstarTxt> Get(string inputFilePath);
   } 

   public class AllstartxtService 
   {
   	public string ErrorMessage {get;set;}

	public IEnumerable<AllstarTxt> Get(string inputFilePath) 
	{
	    if (String.IsNullOrEmpty(inputFilePath)) throw new ArgumentNullException("inputFilePath");
	    try {
                var lines = File.ReadAllLines(inputFilePath);
		
                return from line in lines
                            let data = line.Split(',')
			    select new AllstarTxt
                                       {
				        Property1 = data[0], 
					Property2 = Convert.ToInt32(data[1]), 
					Property3 = data[2], 
					
                                       };

            }
            catch (FileNotFoundException ffe)
            {
                Console.WriteLine("ERROR: {0}", ffe.Message);    
	    }

	
	    return null; 
	}
   }
}


