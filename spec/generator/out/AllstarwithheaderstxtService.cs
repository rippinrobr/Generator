//------------------------------------------------------------------------------
// Generated on 2011-02-08 18:03:49 -0500
// Generated by rob
// Using Generator 0.1.1
//------------------------------------------------------------------------------
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using AllstarWithHeadersTxt;

using System;



namespace AllstarWithHeadersTxt
{

   public interface IAllstarwithheaderstxtService
   {
   	string ErrorMessage {get;set;}
	IQueryable<AllstarWithHeadersTxt> Get(string inputFilePath);
   } 

   public class AllstarwithheaderstxtService 
   {
   	public string ErrorMessage {get;set;}

	public IEnumerable<AllstarWithHeadersTxt> Get(string inputFilePath) 
	{
	    if (String.IsNullOrEmpty(inputFilePath)) throw new ArgumentNullException("inputFilePath");
	    try {
                var lines = File.ReadAllLines(inputFilePath);
		
                return from line in lines
                            let data = line.Split(',')
			    select new AllstarWithHeadersTxt
                                       {
				        Lahmanid = data[0], 
					Yearid = Convert.ToInt32(data[1]), 
					Lgid = data[2], 
					
                                       };

            }
            catch (FileNotFoundException ffe)
            {
                Console.WriteLine("ERROR: {0}", ffe.Message);    
	    }

	
	    return null; 
	}
   }
}


